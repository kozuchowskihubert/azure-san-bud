#!/bin/bash
# Instrukcje tworzenia hasa aplikacji Google dla sanbud.kontakt@gmail.com

echo " Tworzenie hasa aplikacji Google dla sanbud.kontakt@gmail.com"
echo "================================================================"
echo ""
echo "锔  WA呕NE: Musisz to zrobi rcznie w przegldarce"
echo ""
echo "Krok 1: Zaloguj si do konta Google"
echo "    https://myaccount.google.com/"
echo "    Email: sanbud.kontakt@gmail.com"
echo ""
echo "Krok 2: Przejd藕 do ustawie bezpieczestwa"
echo "    https://myaccount.google.com/security"
echo ""
echo "Krok 3: Wcz weryfikacj dwuetapow (jeli nie jest wczona)"
echo "    Znajd藕 sekcj 'Logowanie w Google'"
echo "    Kliknij 'Weryfikacja dwuetapowa'"
echo "    Postpuj zgodnie z instrukcjami"
echo ""
echo "Krok 4: Utw贸rz haso aplikacji"
echo "    https://myaccount.google.com/apppasswords"
echo "    Wybierz aplikacj: 'Poczta'"
echo "    Wybierz urzdzenie: 'Inne (nazwa niestandardowa)'"
echo "    Wpisz: 'SanBud SMTP Server'"
echo "    Kliknij 'Generuj'"
echo ""
echo "Krok 5: Skopiuj wygenerowane haso (16 znak贸w)"
echo "   锔  Haso bdzie wywietlone tylko raz!"
echo "    Skopiuj haso (np: 'abcd efgh ijkl mnop')"
echo "    Zapisz je w bezpiecznym miejscu"
echo ""
echo "Krok 6: Zaktualizuj konfiguracj"
echo "   Uruchom: ./scripts/update-smtp-config.sh"
echo "   Lub rcznie zaktualizuj pliki:"
echo "   - .env (dla lokalnego rodowiska)"
echo "   - Azure App Settings (dla produkcji)"
echo ""
echo "================================================================"
echo ""
echo " Jeli Google Workspace nie pozwala na hasa aplikacji:"
echo ""
echo "Opcja A: Sprawd藕 ustawienia administratora"
echo "   1. Zaloguj si do Google Admin Console"
echo "   2. Bezpieczestwo > Ustawienia > Mniej bezpieczne aplikacje"
echo "   3. Wcz dostp dla u偶ytkownik贸w"
echo ""
echo "Opcja B: U偶yj OAuth2 (bardziej bezpieczne)"
echo "   1. Przejd藕 do Google Cloud Console"
echo "   2. Utw贸rz nowy projekt lub wybierz istniejcy"
echo "   3. Wcz Gmail API"
echo "   4. Utw贸rz credentials OAuth 2.0"
echo ""
echo "Opcja C: U偶yj alternatywnej usugi email"
echo "   - SendGrid (12,000 emaili/miesic za darmo)"
echo "   - Mailgun (5,000 emaili/miesic za darmo)"
echo "   - Amazon SES (62,000 emaili/miesic za darmo z AWS Free Tier)"
echo ""
echo "================================================================"
echo ""
echo " Potrzebujesz pomocy?"
echo "   Otw贸rz przegldark na: https://myaccount.google.com/apppasswords"
echo ""

# Otw贸rz przegldark automatycznie
read -p "Czy chcesz otworzy Google App Passwords w przegldarce? (t/n): " choice
if [[ "$choice" == "t" || "$choice" == "T" ]]; then
    if [[ "$OSTYPE" == "darwin"* ]]; then
        open "https://myaccount.google.com/apppasswords"
    elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
        xdg-open "https://myaccount.google.com/apppasswords"
    else
        echo "Otw贸rz rcznie: https://myaccount.google.com/apppasswords"
    fi
fi