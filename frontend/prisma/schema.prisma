// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Customer {
  id          Int           @id @default(autoincrement())
  first_name  String
  last_name   String
  email       String        @unique
  phone       String
  address     String?
  city        String?
  postal_code String?
  created_at  DateTime      @default(now())
  updated_at  DateTime      @updatedAt
  appointments Appointment[]

  @@map("customers")
}

model Service {
  id               Int           @id @default(autoincrement())
  name             String
  description      String?
  category         String
  price            Decimal       @db.Decimal(10, 2)
  duration_minutes Int
  is_active        Boolean       @default(true)
  created_at       DateTime      @default(now())
  updated_at       DateTime      @updatedAt
  appointments     Appointment[]

  @@map("services")
}

model Appointment {
  id                 Int      @id @default(autoincrement())
  customer_id        Int
  service_id         Int
  scheduled_date     DateTime @db.Date
  scheduled_time     DateTime @db.Time
  status             String   @default("pending")
  notes              String?
  
  // Calendar integration fields
  calendar_event_sent Boolean @default(false)
  calendar_platforms  String?
  event_title         String?
  event_location      String?

  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt

  customer Customer @relation(fields: [customer_id], references: [id], onDelete: Cascade)
  service  Service  @relation(fields: [service_id], references: [id])

  @@map("appointments")
}
